<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>Status Change: Now Using Event Sourcing</title>

		<meta name="description"
			  content="Being flexible to changes in business process makes our jobs easier, and it helps our applications adapt to those changes with minimal code changes. One of the biggest adaptions in our applications has been the addition of Events to make a note of an Event in the system. With these Events, we can affect change immediately, or even later. This is most helpful in our reporting interfaces. We can build, change, and throw away our reports very easily. This is much easier than our older reports being generated by large SQL queries.">
		<meta name="author" content="Emily Stamey">

        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

        <meta name="viewport"
              content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/white.css">
        <link rel="stylesheet" href="css/my-style.css">

		<!-- Theme used for syntax highlighting of code -->
		<link rel="stylesheet" href="./node_modules/highlight.js/styles/zenburn.css">

        <link rel="icon" type="image/x-icon" href="favicon.ico" />

        <!--[if lt IE 9]>
        <script src="lib/js/html5shiv.js"></script>
        <![endif]-->

		<link rel="stylesheet" href="plugin/accessibility/helper.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
            <div class='footer'>
                @elstamey      <a href="https://joind.in/talk/280df">https://joind.in/talk/280df</a>
            </div>
			<div class="slides">
                <section>
                    <myRowBox>
                        <article>
                            <h3>Status Change: Now Using Event Sourcing</h3>
                            <p>by Emily Stamey</p>
                            <p><a href="https://joind.in/talk/280df">https://joind.in/talk/280df</a></p>
                        </article>
                        <article>
                            <img src="img/status_change/events.jpg"
                        </article>
                    </myRowBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Hi, I'm Emily!</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p>I work at NC State</p>
                            <p>Our applications support the College of Engineering, mostly outside of the classroom</p>
                            <p>We maintain 70 legacy applications</p>
                        </article>
                    </myColBox>
                    <header>
                        <myColBox >
                            <article>
                                <img src="img/me/developer.png" alt="developer">
                            </article>
                            <article>
                                <img src="img/me/ncsu_block_s.png" alt="NC State University logo">
                            </article>
                        </myColBox>
                    </header>
                    <aside class="notes">
                        <p>We are going to talk about Event Sourcing, but we will begin in a sort of roundabout way because
                            at State we have been adding Event Sourcing to many of our legacy projects.  We have one project
                            that we are rewriting, and it's a good case study for an older approach with status flags and we are rewriting it to use
                            event sourcing.</p>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>What we&#39;ll cover:</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>Processes from paper to web forms</li>
                                <li>What is Event Sourcing?</li>
                                <li>Introducing what this code looks like (LIGHT)</li>
                                <li>Advantages and Disadvantages</li>
                            </ul>
						</article>
                    </myColBox>
                    <aside class="notes">
                        <li>We will talk about these web processes going from paper forms to web forms.</li>
                        <li>The definitions and terminology around Event Sourcing</li>
                        <li>We'll talk about what the PHP code generally looks like in this event sourced application</li>
                        <li>Finally, we'll look at pros and cons.  It's a REAL mental shift coming from a legacy application to Event Sourcing</li>

                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h1>Brace Yourself!</h1>
                    </myTitleBox>
                    <myRowBox>
                        <article>
                            <img src="img/status_change/sea_kayak_waves_lee_ciaran.jpg">
                            <h5 class="attrib" style="position: relative; top: 500px; align: bottom;left: -100px;">&copy; photo by <a
                                    href="https://www.flickr.com/photos/lee_ciaran/">Ciaran Lee</a></h5>
                        </article>
                    </myRowBox>
                    <aside class="notes">
                        <li>So be patient with yourself</li>
                        <li>If you've ever done this, you know it's tough.  The strategy is to point into the waves and paddle HARD</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h1>Relax, Enjoy the Ride!</h1>
                    </myTitleBox>
                    <myRowBox>
                        <article>
                            <img src="img/status_change/sea_kayak_crash_lisakayaks.jpg">
                            <h5 class="attrib" style="position: relative; top: 500px; align: bottom;left: -100px;">&copy; photo by <a
                                    href="https://www.flickr.com/photos/lisakayaks/">Lisa Ouellette</a></h5>
                        </article>
                    </myRowBox>
                    <aside class="notes">
                        <li>If you try to change direction, you often tip over like this.</li>
                        <li>This is my way of asking that you try to follow along with me.</li>
                    </aside>
                </section>
                <section>
                    <myRowBox>
                        <article>
                            <img src="img/status_change/exercising_brain.jpg">
                        </article>
                    </myRowBox>
                    <aside class="notes">
                        <li>It's completely normal to feel like this when you're learning about Event Sourcing</li>
                        <li>It's a REAL mental shift coming from an older application to ES, so try to relax your brains a little</li>
                        <li>Try to follow the way I'm describing how it can be used moreso than the code examples.  Those will be available for you to look at.</li>
                        <li>And unfortunately I don't have all of this tied together yet, as with MANY of the online Event Sourcing examples</li>
                        <li>But you will gain a better understanding of how this can be useful, and some resources to get you started</li>
                        <li>Be patient with yourself and know that you may do more reading before this clicks</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Forms</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p>A lot of our systems were built to replace paper processes</p>
                            <p>They often closely map to this physical form.</p>

                        </article>
                        <article>
                            <img src="img/status_change/tax_form_aidanmorgan.jpg" alt="Paper form">
                            <h5 class="attrib" style="">&copy; photo by <a
                                    href="https://www.flickr.com/photos/aidanmorgan/">Aidan Morgan</a></h5>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>What I see a lot at the University is that many of our applications began with a need to
                            collect data from paper forms that students were filling out.</li>
                        <li>As the administration became comfortable with computers, more of the process went into our applications</li>
                        <li>Often this meant increased complexity in the tools</li>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <img src="img/status_change/FormProcess.svg" alt="FormProcess"></p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>For this application, a student requests enrollment in a Distance Ed class</li>
                        <li> That request is either approved or rejected</li>
                        <li>The paper version of this process meant the Admin put the request form into an approve or reject pile</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Paper Forms handling state</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <img src="https://upload.wikimedia.org/wikipedia/commons/thumb/6/6f/Copies_of_documents_at_European_Parliament_in_Strasbourg.jpg/1024px-Copies_of_documents_at_European_Parliament_in_Strasbourg.jpg" alt="Paper forms sorted for a process">
                        </article>
                        <article>
                            <p>Piles indicate status of the form</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>These piles indicated the status of the request</li>
                        <li>On the web, we created an admin panel with a drop-down to indicate status</li>
                        <li>Over time the concept of status grew in complexity</li>
                        <li>Processes that handled lots of forms could become much more complex, even in trying to organize them</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Paper Forms handling state</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                           <img src="img/status_change/collegerejection.jpg" alt="stamped application">
                        </article>
                        <article>
                            <p>Status doesn&#39;t really communicate why or what happened</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>You may have also seen a paper form with a stamp to indicate status.</li>
                        <li>But what if things change, and a rejection can be undone. Suppose it was rejected because tuition wasn't paid, the student paid</li>
                        <li>What if an application changes state multiple times through the process?  The history doesn't convey between piles.</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Why are they in the current state?</h2>
                    </myTitleBox>
                    <myColBox>
                        <article></article>
                        <article>
                            <img src="img/status_change/history_book.png">
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>The status tells where it is in the process, but it doesn't tell you what happened </li>
                        <p>States also carry assumed knowledge of the process without that cause/effect.</p>
                        <p>We are separated from the request&#39;s history.</p>
                        <p>Status labels & meaning can change without conveying process changes</p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <img src="img/status_change/compensating_measures.jpg" alt="compensating_measures.jpg">
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>Compensating measures this app made to attempt to preserve history</p>
                        <li>add columns to the table with form data</li>
                        <li>add a related table for notes</li>
                        <li>more statuses to include the many forks in the process (like what type of hold)</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>How workflows become complex</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                           <p><img src="img/status_change/more_statuses.jpg" alt="more_statuses.jpg"></p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>Sometimes your workflow forks in multiple directions or involves long
                            lists in order to capture the complexity of the business process</p>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>This is what you may end up with</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <select name="newStatus">
                                <option value="RECEIVED">RECEIVED</option>
                                <option value="CANCELLED">CANCELLED</option>
                                <option value="COURSE CANCELLED">COURSE CANCELLED</option>
                                <option value="COURSE NOT APPROVED">COURSE NOT APPROVED</option>
                                <option value="CPC DENIED">CPC DENIED</option>
                                <option value="CPC NOT APPROVED">CPC NOT APPROVED</option>
                                <option value="CPC PENDING TRANSCRIPT">CPC PENDING TRANSCRIPT</option>
                                <option value="CPC PROCESSING">CPC PROCESSING<em></option>
                                <option value="DENIED">DENIED</option>
                                <option value="DROPPED AFTER CENSUS">DROPPED AFTER CENSUS</em></option>
                                <option value="DROPPED BEFORE CLASSES BEGUN">DROPPED BEFORE CLASSES BEGUN<em></option>
                                <option value="DROPPED BETWEEN BEGINNING OF CLASS AND CENSUS DATE">DROPPED BETWEEN BEGINNING OF CLASS AND CENSUS DATE</em></option>
                                <option value="DROPS/WITHDRAWALS AT SITES">DROPS/WITHDRAWALS AT SITES<em></option>
                                <option value="ECE ON CAMPUS STUDENTS">ECE ON CAMPUS STUDENTS</option>
                                <option value="ENROLLMENT CANCELLED">ENROLLMENT CANCELLED</option>
                                <option value="EOL APPROVED">EOL APPROVED</em></option>
                                <option value="EOL MISC">EOL MISC<em></option>
                                <option value="NEW STUDENT REGISTRATION">NEW STUDENT REGISTRATION</option>
                                <option value="PENDING ON CAMPUS REQUEST">PENDING ON CAMPUS REQUEST</option>
                                <option value="ON CAMPUS STUDENT NOT APPROVED">ON CAMPUS STUDENT NOT APPROVED</option>
                                <option value="PENDING CASHIER HOLD">PENDING CASHIER HOLD</option>
                                <option value="PENDING EOL APPROVAL">PENDING EOL APPROVAL</em></option>
                                <option value="PENDING INSTRUCTOR APPROVAL">PENDING INSTRUCTOR APPROVAL</option>
                                <option value="PENDING INTERNATIONAL STUDENT">PENDING INTERNATIONAL STUDENT</option>
                                <option value="PENDING NDS OPEN ENROLLMENT">PENDING NDS OPEN ENROLLMENT</option>
                                <option value="PENDING OIS VISA STUDENT">PENDING OIS VISA STUDENT</option>
                                <option value="PENDING PERMANENT RESIDENT">PENDING PERMANENT RESIDENT</option>
                                <option value="PENDING TERM ADVISEMENT HOLD">PENDING TERM ADVISEMENT HOLD</option>
                                <option value="PENDING TRANSCRIPT">PENDING TRANSCRIPT</option>
                                <option value="PENDING TUITION PREPAYMENT">PENDING TUITION PREPAYMENT</option>
                                <option value="PREAPPROVED RETURNING">PREAPPROVED RETURNING</option>
                                <option value="PROCESSING NDS">PROCESSING NDS<em></option>
                                <option value="PROCESSING SITE">PROCESSING SITE</em></option>
                                <option value="PROCESSING Z">PROCESSING Z<em></option>
                                <option value="PROJECT MESSAGE - MAE 586">PROJECT MESSAGE - MAE 586</option>
                                <option value="PROJECT MESSAGE - NE 693">PROJECT MESSAGE - NE 693</option>
                                <option value="REGISTERED">REGISTERED</option>
                                <option value="REGISTERED ASHEVILLE">REGISTERED ASHEVILLE</option>
                                <option value="REGISTERED HAVELOCK">REGISTERED HAVELOCK</option>
                                <option value="REGISTERED WILMINGTON">REGISTERED WILMINGTON</option>
                                <option value="SITE APPROVAL: ASHEVILLE">SITE APPROVAL: ASHEVILLE</em></option>
                                <option value="SITE APPROVAL: HAVELOCK">SITE APPROVAL: HAVELOCK<em></option>
                                <option value="SITE APPROVAL: WILMINGTON">SITE APPROVAL: WILMINGTON</em></option>
                                <option value="SITE NOT APPROVED">SITE NOT APPROVED</option>
                                <option value="SWAPPED OUT">SWAPPED OUT</option>
                                <option value="TRANSCRIPT APPROVED">TRANSCRIPT APPROVED<em></option>
                                <option value="WITHDRAWN">WITHDRAWN</em></option>
                            </select>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>I like to open this up for the full effect of how ridiculous it can become.  This group was
                            maintaining their own web app before we inherited it</p>
                        <p>You will notice these are actually subsets of the same status with explanation attached</p>
                        <li>Registered with a Site location</li>
                        <li>Pending with reasons attached</li>
                        <li>dropped with a time component of when it was dropped</li>
                        <li>Things like this make the drop-down complicated and go beyond the idea of what a status is</li>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h1>Something Happened</h1>
                    </myTitleBox>
                    <myColBox>
                        <article>

                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h3>Something happened</h3>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p>Status is a reflection of something that happened</p>
                            <p>There is ONE of each status + reasons/details  </p>
                            <p>Events can record what happened</p>
                        </article>
                        <article>
                            <img src="img/status_change/collegerejection.jpg" alt="stamped application">
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>In a workflow, usually something happens and THEN your object&#39;s status is
                            updated to reflect that something happened.</p>
                        <p>There aren&#39;t 9 PENDING states.  There is ONE PENDING and 9 reasons for it to be PENDING </p>
                        <p>Events can record what happened</p>
                        <p>As our software becomes aware of these events, we can adapt, flex, or reorient.</p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <img src="img/status_change/speech-bubbles.png">
                        </article>
                        <article>
                            <p>The request doesn't get stuck</p>
                            <p>A Hold can be lifted, and the request process continue</p>
                            <p>The request can move to a next state </p>
                            <p>History is preserved</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>Instead of putting the form in the trash, we can reconsider it.</p>
                        <p>When a student hasn&#39;t paid fees, or completed their registration, their request is put on HOLD</p>
                        <p>Instead of reviewing all forms in a HOLD state to see if they can proceed,
                            An event can tell us the hold is lifted.</p>
                        <p>That Hold Removed event can trigger the request to be reviewed
                            by an administrator.</p>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h1>Enter Event Sourcing</h1>
                    </myTitleBox>
                    <myColBox>
                        <article>

                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Definition Event Sourcing</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p>The fundamental idea of Event Sourcing is that of ensuring <strong>every change to the state</strong> of an application <strong>is captured in an event object</strong>, and that these event objects are themselves stored in the sequence they were applied for the same lifetime as the application state itself.</p>
                            <ul>
                                <li>Martin Fowler</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>A lot of what we read about Event Sourcing comes from Martin Fowler.  But I like Greg Young's talks the best.  His examples are clear</p>
                        <p>The idea of Event Sourcing is that of ensuring <strong>every change to the state</strong> of an application <strong>is captured in an event object</strong>,</p>
                        <p>These event objects are then stored in the order they were applied for always and forever</p>
                        <p></p>

                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>What&#39;s important about Events</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>Events</li>
                                <li>Details of the Event (attributes)</li>
                                <li>Order/Sequence</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>We will collect the details of the event, its attributes</p>
                        <p>we will also capture the timestamp in order to apply it in the correct order</p>
                        <p>If we were tracking transactions for a bank account, we would have events like Deposit Money
                            and Withdraw money.  Those would have an amount and an account number.  And the order in
                            which they happened would be critical to having an accurate balance</p>
                        <p>We are capturing the crucial details with those events.  And our system will later apply them
                            using the rules of our process</p>
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h3>Event Sourcing</h3>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ol>
                                <li>Every change is captured in an event object</li>
                                <li>Event objects are stored in the sequence they happened</li>
                                <li>That sequence determines the order they will be applied in our code</li>
                            </ol>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h3>Events</h3>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>Events are usually named as past-tense verbs</li>
                                <li>Have attributes that are values
                                    <ul>
                                        <li>never an aggregate root </li>
                                        <li>never a model/collection/object</li>
                                    </ul>
                                </li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>You will see event names like Enrolllment Request Was Approved because validation was done prior to recording the event,
                        and these are KNOWN happenings in our system</p>
                        <p>This Event will have attributes, like the student id, the course id, who the approver was
                            because this is important information</p>
                        <p>We wouldn't store the Enrollment Request Object because if we ever changed that object, we'd
                            have difficulty applying the event or reconstructing that object</p>
                        <p>Storing the VALUES on our Event gives us the flexibility for the system to change later
                            But that event never will</p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <h2>The fact that an event happened <u>doesn&#39;t ever
                            change</u> even though the <u>behavior</u> around it may have</h2>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>Read it</p>
                        <p>So unlike statuses in our system which evolve over time and could change meaning, You will never change this event</p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p><img src="img/status_change/why_events.jpg" alt="why_events.jpg"></p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <li>The events that got us to this state are more important than the current status</li>
                        <li>We now have an audit log, and proof of how we got to this state</li>
                        <li>That history is more important that the current state BECAUSE</li>
                        <li>We are able to replay those events to prove the state</li>
                        <li>With our Scholarships Application, we collected the attributes that helped a student match for the scholarship to keep a record of why they were chosen </li>
                        <li>If we needed to see the budgets on any given day in the past, we could produce that information</li>
                        <li>And when they completely changed the format of budgets they wanted to review, we could easily rebuild that without affecting the amounts.</li>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <img src="img/status_change/dont_delete_events.jpg" alt="event_rules.jpg">
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>Greg Young in a talk makes a point of how difficult it was to find a picture of an accountant erasing
                            because that's not something they do.  They make a correction undoing a mistake and then make the intended adjustment</p>
                        <p>So to fix one event, you may have two other events, but that event will (almost) never be deleted</p>
                        <p>You want to adjust your thinking in this way</p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p><img src="img/status_change/event_rules.jpg" alt="event_rules.jpg"></p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                        <p>notes for the picture:  not event2</p>
                        <p>In our system, we have an event with some meaning, and a listener that sees that event when it happens
                        <li>the apply method tells our system what should happen in this context and it produces this result</li>
                        <li>but what if our understanding of the event changes.  We might rewrite that apply event method, which produces a different result</li>
                        <li>Maybe these are two different views in our system, that handle different behavior, those would coexist; like reports for two different types of users</li>
                        <li>But it could also be that we rewrite what it means to apply that event and the new apply method stays, with the new report, and the old is deleted</li></p>
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <p>The event is less likely to change.  Things like Approve and Reject a
                                Request may later require additional attributes, but the part of the
                                process that will change is most likely the result that follows that event.</p>
                            <p> The structure of the resulting data is more likely to change than the behavior</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>The Code</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p> There are many classes involved:</p>
                            <ul>
                                <li>Events</li>
                                <li>Domain Message</li>
                                <li>Classes with Listeners<ul>
                                    <li>Projections</li>
                                    <li>Read Models</li>
                                </ul>
                                </li>
                                <li>Commands &amp; Handlers (CQRS)</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>EnrollmentRequestWasApproved (Class)</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>student id</li>
                                <li>course id</li>
                                <li>semester</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>Event code</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Domain Message Wrapper (Class)</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <p>Event can be wrapped by Domain message</p>
                            <p>This contains a version, timestamp, id, and the event itself</p>
                            <ul>
                                <li>id</li>
                                <li>Event Type</li>
                                <li>version</li>
                                <li>timestamp</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>Domain Message</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Event Store</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                           <p>Event Store is a domain specific database for people who use the Event
                        Sourcing pattern in their apps. It is a functional database which based
                        on a publish-subscribe messages pattern.</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>snapshot of the Events table</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <p>code for the eventstore
                                code that tells which Events to pick from the eventstore</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Listeners (Class)</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>create listeners that listen to certain events and determine what they mean</li>
                                <li>StudentProfileProjector</li>
                                <li>EnrollmentRequests Read Model</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>code for projections</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>code for read model</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>Commands</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                           <p>Handlers</p>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Pros</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>maps closely to the process</li>
                                <li>flexible to changes in process</li>
                                <li>meaning of events can change without altering history</li>
                                <li>scholarships; able to back up all events to roll over a new year.<br>Didn&#39;t need to preserve full database.</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h2>Cons</h2>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li>a lot of classes</li>
                                <li>more design patterns to adjust to (complicated)</li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myTitleBox>
                        <h3>Links for further reading</h3>
                    </myTitleBox>
                    <myColBox>
                        <article>
                            <ul>
                                <li><a href="https://www.youtube.com/watch?v=JHGkaShoyNs">Greg Young CQRS and Event Sourcing</a></li>
                                <li><a href="https://www.youtube.com/watch?v=whCk1Q87_ZI">Greg Young - long class</a></li>
                                <li><a href="https://www.youtube.com/watch?v=LDW0QWie21s">Greg Young - A Decade of DDD, CQRS, Event Sourcing</a></li>
                                <li><a href="https://www.phproundtable.com/episode/event-sourcing-in-php">PHP Round Table - Event Sourcing</a></li>
                                <li><a href="https://github.com/broadway/broadway">Broadway - framework for CQRS and ES</a></li>
                            </ul>
                        </article>
                    </myColBox>
                    <aside class="notes">
                    </aside>
                </section>
                <section>
                    <myColBox>
                        <article>
                            <img src="img/midwest_logo.svg">
                            <h1>Thank You!</h1>
                            <p>Emily Stamey</p>
                            <p>Twitter: <a href="https://twitter.com/elstamey">@elstamey</a></p>
                            <p>Joind.in: <a href="https://joind.in/talk/280df">https://joind.in/talk/280df</a></p>
                        </article>
                    </myColBox>
                </section>
            </div>
        </div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'node_modules/highlight.js/lib/highlight.js' },
					{ src: 'plugin/accessibility/helper.js', async: true, condition: function() {
						return !!document.body.classList;
					}},
					{
						src: 'node_modules/reveal-code-focus/reveal-code-focus.js',
						async: true,
						callback: function() {
							RevealCodeFocus();
						}
					},
					{ src: 'plugin/elapsed-time-bar/elapsed-time-bar.js'}
				],

                // The "normal" size of the presentation, aspect ratio will be preserved
                // when the presentation is scaled to fit different resolutions. Can be
                // specified using percentage units.
                width: 1280,
                height: 720,

                // Factor of the display size that should remain empty around the content
                margin: 0.1,

                // Bounds for smallest/largest possible scale to apply to content
                minScale: 0.2,
                maxScale: 1.5,


				// your allotted time for presentation
				allottedTime: 50 * 60 * 1000, // 50 minutes

				// - (optional) height of page/time progress bar
				progressBarHeight: 3,

				// - (optional) bar color
				barColor: 'rgb(200,0,0)',

				// - (optional) bar color when timer is paused
				pausedBarColor: 'rgba(200,0,0,.6)',

				// Display controls in the bottom right corner
				controls: true,

				// Display a presentation progress bar
				progress: true,

				// Display the page number of the current slide
				slideNumber: true,

				// Push each slide change to the browser history
				history: true,

				// Enable keyboard shortcuts for navigation
				keyboard: true,

				// Enable the slide overview mode
				overview: true,

				// Vertical centering of slides
				center: true,

				// Enables touch navigation on devices with touch input
				touch: true,

				// Loop the presentation
				loop: false,

				// Change the presentation direction to be RTL
				rtl: false,

				// Randomizes the order of slides each time the presentation loads
				shuffle: false,

				// Turns fragments on and off globally
				fragments: true,

				// Flags if the presentation is running in an embedded mode,
				// i.e. contained within a limited portion of the screen
				embedded: false,

				// Flags if we should show a help overlay when the questionmark
				// key is pressed
				help: true,

				// Flags if speaker notes should be visible to all viewers
				showNotes: false,

				// Number of milliseconds between automatically proceeding to the
				// next slide, disabled when set to 0, this value can be overwritten
				// by using a data-autoslide attribute on your slides
				autoSlide: 0,

				// Stop auto-sliding after user input
				autoSlideStoppable: true,

				// Use this method for navigation when auto-sliding
				autoSlideMethod: Reveal.navigateNext,

				// Enable slide navigation via mouse wheel
				mouseWheel: false,

				// Hides the address bar on mobile devices
				hideAddressBar: true,

				// Opens links in an iframe preview overlay
				previewLinks: false,

				// Transition style
				transition: 'none', // none/fade/slide/convex/concave/zoom

				// Transition speed
				transitionSpeed: 'default', // default/fast/slow

				// Transition style for full page slide backgrounds
				backgroundTransition: 'none', // none/fade/slide/convex/concave/zoom

				// Number of slides away from the current that are visible
				viewDistance: 3,

				// Parallax background image
				parallaxBackgroundImage: '', // e.g. "'https://s3.amazonaws.com/hakim-static/reveal-js/reveal-parallax-1.jpg'"

				// Parallax background size
				parallaxBackgroundSize: '', // CSS syntax, e.g. "2100px 900px"

				// Number of pixels to move the parallax background per slide
				// - Calculated automatically unless specified
				// - Set to 0 to disable movement along an axis
				parallaxBackgroundHorizontal: null,
				parallaxBackgroundVertical: null,

                // Value of the display CSS property applied to current slide to make it visible
                display: 'flex',

				keyboard: {
					// pause/resume time when Enter is pressed
					13: () => {
					ElapsedTimeBar.isPaused ? ElapsedTimeBar.resume() : ElapsedTimeBar.pause();
			},

			// reset timer when 'r' is pressed
			82: () => {
				ElapsedTimeBar.reset();
			}
			}
            })
        </script>
	</body>
</html>
